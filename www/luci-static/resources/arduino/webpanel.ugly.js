"use strict";function formCheck(e){function a(e){return e==null||e===""}var t=e["wifi.ssid"],n=e["wifi.encryption"],r=e["wifi.password"],i=e.hostname,s=e.password,o,u=document.getElementById("error_response");return u.innerHTML="",o=!1,r.className="normal",t.className="normal",i.className="normal",s.className="normal",u.className="hidden",!t.disabled&&a(t.value)&&(errorHandler(t,u,"Please choose a WiFi network name"),o=!0),!r.disabled&&n.value!="none"&&(a(r.value)?(errorHandler(r,u,"Please choose a WiFi password"),o=!0):r.value.length<8&&(errorHandler(r,u,"WiFi password should be 8 char at least"),o=!0)),a(i.value)?(errorHandler(i,u,"Please choose a name for your Y&uacute;n"),o=!0):i.value.match(/[^a-zA-Z0-9_]/)&&(errorHandler(i,u,"Incorrect hostname: you can use only characters between a and z, numbers and the underscore (_)"),o=!0),s.value!=null&&s.value!=""&&s.value.length<8&&(errorHandler(s,u,"Password should be 8 char at least"),o=!0),!o}function errorHandler(e,t,n){e.className="error",t.className="visible",t.innerHTML="<p>"+t.innerHTML+n+"<br /></p>"}function goto(e){return document.location=e,!1}function onchange_security(e){var t=document.getElementById("wifi_password_container"),n=document.getElementById("wifi_password");e.value=="none"?t.setAttribute("class","hidden"):(t.removeAttribute("class"),n.value="",n.focus())}function send_post(e,t,n){var r={};for(var i=3;i<arguments.length;i++)t[arguments[i]].disabled||(r[arguments[i]]=t[arguments[i]].value);var s=doEncrypt(key_id,0,public_key,JSON.stringify(r)),o=document.getElementById(n);return o.pgp_message.value=s,o.submit(),!1}function grey_out_wifi_conf(e){e?document.getElementById("wifi_container").setAttribute("class","disabled"):document.getElementById("wifi_container").setAttribute("class",""),document.getElementById("wifi_password").disabled=e,document.getElementById("wifi_ssid").disabled=e,document.getElementById("wifi_encryption").disabled=e}function matchpassword(){var e=document.getElementById("confpassword"),t=document.getElementById("password");e.value==t.value?document.getElementById("pass_mismatch").setAttribute("class","hidden error_container input_message"):document.getElementById("pass_mismatch").setAttribute("class","error_container input_message")}var pu,key_id,public_key;typeof getPublicKey=="function"&&(pu=new getPublicKey(pub_key),key_id=pu.keyid,public_key=pu.pkey.replace(/\n/g,"")),document.body.onload=function(){document.getElementById("username")&&document.getElementById("password").focus(),document.getElementById("wificheck")&&(document.getElementById("wificheck").onclick=function(e){grey_out_wifi_conf(!e.target.checked)}),document.getElementById("wifi_encryption")&&(document.getElementById("wifi_encryption").onchange=function(e){onchange_security(e.target)}),document.getElementById("confpassword")&&(document.getElementById("confpassword").onkeyup=function(e){matchpassword(e.target)},document.getElementById("password").onkeyup=function(e){matchpassword(e.target)})};