"use strict";function formCheck(e){function a(e){return e==null||e===""}var t=e["wifi.ssid"],n=e["wifi.encryption"],r=e["wifi.password"],i=e.hostname,s=e.password,o,u=document.getElementById("error_container");return u.innerHTML="",o=!1,r.className="normal",t.className="normal",i.className="normal",s.className="normal",u.className="hidden",!t.disabled&&a(t.value)&&(errorHandler(t,u,"Please choose a WiFi network name"),o=!0),!r.disabled&&n.value!="none"&&(a(r.value)?(errorHandler(r,u,"Please choose a WiFi password"),o=!0):r.value.length<8&&(errorHandler(r,u,"WiFi password should be 8 char at least"),o=!0)),a(i.value)?(errorHandler(i,u,"Please choose a name for your Yún 云"),o=!0):i.value.match(/[^a-zA-Z0-9_]/)&&(errorHandler(i,u,"Incorrect hostname: you can use only characters between a and z, numbers and the underscore (_)"),o=!0),s.value!=null&&s.value!=""&&s.value.length<8&&(errorHandler(s,u,"Password should be 8 char at least"),o=!0),!o}function errorHandler(e,t,n){e.className="error",t.className="visible",t.innerHTML="<p>"+t.innerHTML+n+"<br /></p>"}function goto(e){return document.location=e,!1}function onchange_security(e){var t=document.getElementById("req_3"),n=document.getElementById("wifi.password");e.value=="none"?(t.setAttribute("style","visibility: hidden"),n.disabled=!0):(t.removeAttribute("style"),n.disabled=!1,n.focus())}function send_post(e,t,n){var r={};for(var i=3;i<arguments.length;i++)t[arguments[i]].disabled||(r[arguments[i]]=t[arguments[i]].value);var s=doEncrypt(key_id,0,public_key,JSON.stringify(r)),o=document.getElementById(n);return o.pgp_message.value=s,o.submit(),!1}function grey_out_wifi_conf(e){var t=["wifi.ssid","wifi.encryption","wifi.password"];for(var n in t)document.getElementById(t[n]).disabled=e;var r="";e&&(r="color: #999999;"),document.getElementById("wifi.parameters").setAttribute("style",r);for(var n in t)document.getElementById(t[n]+".label").setAttribute("style",r);e||onchange_security(document.getElementById("wifi.encryption"))}var pu,key_id,public_key;typeof getPublicKey=="function"&&(pu=new getPublicKey(pub_key),key_id=pu.keyid,public_key=pu.pkey.replace(/\n/g,"")),document.body.onload=function(){document.getElementById("username")&&document.getElementById("password").focus(),document.getElementById("wifi.configure")&&(document.getElementById("wifi.configure").onclick=function(e){grey_out_wifi_conf(!e.target.checked)})};